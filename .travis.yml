sudo: required
language: java
jdk: openjdk8
services:
- docker
env:
  global:
  - secure: TAkmTWOkvz7mgpf2TtcAOztpll7sIqa0WFf7MtYmstigs1Htq29mvQ+AxxkjDfsKiZKy8aX7lyggwtyQHI1zF1nDSBapO3pxLI9PmzqH05z6cU0M6KTiv/R1VAYya9EflNB54EHEpLi59+3O/EHtQWOh7qG+6aKvDgToJuEBEiAniHRwdvxxywvIaZN/c2yqjGwooHUrBasIU6Cn2kvLLVmLMyAGN79D3BG5mPR4WGpXyMWDuC+Kihf0zHf2T9/S58qc7YIpzol1b7TjNkmCnIPLjtm6L2jxQISEPd5gUv98iGfweF685lFrA25csOVS43Sy7oK5OudRZ0OOv0WqhMZuyPnANFQJkyEPWeayjJzGYFeGs90WxywRSAqA2nxdin14C/N4DydNCqGkjnRrG9P9fhx2HAhnvt6m6MojytjAOLWDNCF3ZxgMkxqMZvtntKhGbJAHMjd/nyAST9ZpcmHWCsg3U80kpUpSoLC9Mzxnf8Co7Z4nn7VhPmwrd6rHlpFIkxmUYR+w0kKgIH4J70koQFD2BYKtJUSCjeoFZGcTUChjL+Y7p14LwUUpUyQY3wRnDMz3a7omCJSQeQnPD0tHJxcZHmhr8jVY6Cu60GGLqb2cwdnfbJOcxUKZBMFpqGcdcLM7g/Ws0AsxHh0ILLLhH0ZLZeEF47CU5yrt64w=
  - secure: nspmaZe8CfVVwWgpxezLpCFDXqESHlgWJr1bXVvOeUu801P9Y1NxQKH6vpnlZLaMyZtW/eYownCFWN1JFv8X1EQybYtw3w8peY6pa9jI1Pkj1jhQmO30YDweynQHwlUKH2okgSk7uhwxzVIPqBWSeWGrbmW7fYYu/wjpHSKs43EmailMLacOR82LiseFc3QQN/0I71mXSRhz5nzIRn0DJY8ivXABSUixhHdhpP6y59mc6BLsasjImNC66mvvSFc4hs1BZGkm6cgvhPuDEyfRkKIlmiDNGeV7Vg4+KppSOT4R+55M5Xyj3jmJ7Yke9c0YMtKoLHOPZkABQ1BPmKTYRK06CEYRGz/UPV9Y6svZvq+CsnfOusNIw4/ZYEjFTiXUeYEva+K0/0zADDOM4hWgJB/gGt0A46xuSilK4puwT2P6WxZXuZwH4YWadlcLiRefzPebB2DpRW38eg6SYOn9h7ns09w8CilHUEg+9FyXBS/BM52NuFJuuSru1tvmHS2wBlxmCw/ieUHOD7Y9mRP8JGzZ37pwOYSjpDKjB0v8mmz3Y0t5gMEBHYXKXUZMuOgVFNydt9L8jbZ+y0WrtbP/ZgFyJOEbJuIRHPkx3XJr3GkzL56JhlFEvDADnq3JQK1twhJOzIgjsryLOy1N9R9XzeQTnzfujkjZRDhM/h3MPV0=
  - secure: Jd/UarbYG4MfqMRMV8cuzia6ImYSckar5z01bmVg2TtFEhZRwZbljDfKCurRjenXDVKC2+7UV5PXz3PDj1y9bkVYeJB5a46f3fQL8yOxXJwPTrt0muq0Wvxv+gyqfQQWnbH/niIbVoqg9VFqgapK1GY/Bbgpgp/iAj+iwb4V44+XAVvCqKQaR4RPamaZzt/l+a6M3KzylpzChc+JYutmxzEw8asWhZDH5o3g27nMBScuhQc/fwmLGKIT0XUkr/pZXME5tdO7jDBEkSqq62EE/UjTsQMoSvb3CG/4FIi+T/gZ5Aqre3qDENz2ofAdFtJviTLvih6XJvj+/ZLYbi9YIP0RbqJo75MbGzlWIBPNQ4NMtnskFvMOfHJ6xgbqtgayNGrb2vbr2FITMq5YbDKKkpibsl45ijkLi9AaoxBV5KePFmA/YyDUGOBBdFWv53zFXTzaV5vJO6JwLaSL8Wysz1EHVHkRhJLaODQxAVujnW9kzrHNOlE7EOrVg03xWTfBMZ7ISBv2hPNmj8Xt6bBW/t5+hg8M5GUt5TDWecz7f50IgYsL28usUvAm/U7K0y82S6ushU3scRqbNOzq7Igv+/1TcIlrhk9onrVYAuMETpplxU3wki8RaZmTDAELCopur1ZhWDqUil73fDBWQlKWgRP6ODi4knk76mHrYJFDiJk=
  - secure: FjM0TVE533E+xhnO06sEY3NxCAjV2y4MWH8jBGuG2f8iTpPmbZp7hUAQOn+1AECIaC5C1KX0x4at4qPCxDPeaxAxtiwyOncURtXmkL+05VWP6dPaoIESk2dLfb4KPKxGaw49unCIost/SuWJuOec8bho0GKs2rBmaJrX23Xy0ukKJ1eeJWPv6vfhsFlmrLIQH2evORXS+rd3rqzoO8mKSx2SxW6XShRN4gjChYuNdQSnPl3vDUEOrSxg4hAkUz39D3CDWZ19HkpZadb8481eGjA2XSAscaMOI16AkaC7hnnyLThODFEssnGPnK6J5BngfZde1/g/I7RZWB//ACII2cl49m9CAzS4v/mNxMi9Y+Tiy/xNtVyYViRkRm8Y59+sTKg9GqNVdeeaBwdVMH5Dnpzsg1+mMUPm9V9Il6pJkhT2TFv1T2KQob08duwrR34NkkJ90O7ALG1PxXh5vQwgOJ6CXC9a9xu8doRXs4Gs/zyWEE9MtAr7b/+nlDrvKAlHZriodW1aQvKtXmb+HfBvGEj8wqX6UVzvuBt8V/3AiLguXKdhDYK+G/ZjZ7tPIwgdHAwO9qwW2T2GRXBAYj+IM9fZTT4EvBcSCAdEv5iSE4KF36C8QRzatao+lwE5BgUw6urv+xcbGUkNMtLFrfZkZMtLKrV0LCTfVkynkcXh9ic=
before_install:
- docker pull openjdk:8-jdk-alpine
script:
- mvn test
- mvn clean package
after_success:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH; fi`
- docker build -t $IMAGE_NAME:$COMMIT .
- docker tag $IMAGE_NAME:$COMMIT $IMAGE_NAME:$TAG
- docker push $IMAGE_NAME
deploy:
  provider: heroku
  api_key: $HEROKU_API_KEY
  app: splitspends